(this["webpackJsonpTrackula-Frontend"]=this["webpackJsonpTrackula-Frontend"]||[]).push([[0],{10:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);n(10);var c,r=n(1),o=n.n(r),i=n(8),s=n.n(i),a=n(2),u=n(9),l=n(0),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.className,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:512;return Object(l.jsx)("svg",{className:n?n+" icon":"icon",viewBox:"0 0 ".concat(c," 512"),children:Object(l.jsx)("path",{fill:"currentColor",d:u[e]})})},b=function(e){return j("DELETE",e,448)},d=function(e){return j("MICROPHONE",e,352)},f=function(e){return j("SETTINGS",e)},h=function(e){return j("TIMES",e,352)},O=n(4),m=function(e){return Object(O.a)(Object(O.a)({},e),{},{time:e.time.toISOString()})},v=function(e){return("0"+e).slice(-2)},x=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},g=function(e){return e.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{time:new Date(e.time)})}))},p=function(e){return"".concat(e.getFullYear(),"-").concat(v(e.getMonth()+1),"-").concat(v(e.getDate()))},k=m,S=n(3),M=n.n(S),w=n(5),N=n(6),E=function(e){return"trackuler-"+p(e)},L=function(){var e=Object(w.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=N.a.get(t))){e.next=8;break}return e.prev=2,e.abrupt("return",JSON.parse(n));case 6:e.prev=6,e.t0=e.catch(2);case 8:return e.abrupt("return",[]);case 9:case"end":return e.stop()}}),e,null,[[2,6]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){return L(E(new Date))},C={current:function(){return y().then(g)},create:function(){var e=Object(w.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:(n=e.sent).push(k(t)),N.a.set(E(t.time),JSON.stringify(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(w.a)(M.a.mark((function e(t){var n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:n=e.sent,N.a.set(E(new Date),JSON.stringify(n.filter((function(e){return e.ID!==t}))));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLatest:function(){return Promise.all(Object.keys(localStorage).filter((function(e){return e.startsWith("trackuler-2")})).sort().reverse().slice(1,6).map((function(e){return L(e).then(g)})))}},z={current:C};!function(e){e.LOCAL="local",e.API="API"}(c||(c={}));var D=function(){return z.current};window.SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;var I,P={running:!1,locale:navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language,start:function(){}},A=function(){var e=new SpeechRecognition;return e.continuous=!1,e.lang=P.locale,e.interimResults=!1,e.maxAlternatives=1,P.start=function(){P.running||(e.start(),P.running=!0)},e.onend=function(){P.running=!1},e.onspeechend=function(){e.stop()},e.onerror=function(e){window.console.error("Error occurred in recognition: "+e.error)},e}(),R={onResult:function(e){A.onresult=function(t){e(t.results[0][0].transcript)}},locale:P.locale,startFocusListener:function(){P.start(),window.addEventListener("focus",P.start)},removeFocusListener:function(){window.removeEventListener("focus",P.start)}},T=function(e){var t=e.date,n=Object(r.useMemo)((function(){return function(e){var t=e.getHours(),n=e.getMinutes(),c=(1-(t%12+n/60)/6)*Math.PI,r=5*Math.sin(c),o=5*Math.cos(c),i=(1-n/30)*Math.PI;return{hourX:r,hourY:o,minutesX:8*Math.sin(i),minutesY:8*Math.cos(i)}}(t)}),[t]),c=n.hourX,o=n.hourY,i=n.minutesX,s=n.minutesY;return Object(l.jsx)("svg",{viewBox:"0 0 24 24",children:Object(l.jsxs)("g",{stroke:"black",strokeWidth:2,strokeLinecap:"round",children:[Object(l.jsx)("circle",{cx:12,cy:12,r:11,fill:"white"}),Object(l.jsx)("line",{x1:12,y1:12,x2:12+c,y2:12+o}),Object(l.jsx)("line",{x1:12,y1:12,x2:12+i,y2:12+s})]})})},_=function(e){var t=e.rate,n=Object(r.useMemo)((function(){return function(e){var t=e%1,n=2*(.5-t)*Math.PI,c=10*Math.sin(n),r=10*Math.cos(n);return{x1:t<.5?c:0,y1:t<.5?r:10,x2:t>=.5?c:0,y2:t>=.5?r:10,colorBg:e<1?"white":"darkgreen",colorRate:e<1?"darkgreen":"red"}}(t)}),[t]),c=n.x1,o=n.y1,i=n.x2,s=n.y2,a=n.colorBg,u=n.colorRate;return Object(l.jsxs)("svg",{viewBox:"0 0 24 24",children:[Object(l.jsx)("g",{stroke:"black",strokeWidth:2,strokeLinecap:"round",children:Object(l.jsx)("circle",{cx:12,cy:12,r:11,fill:a,stroke:"black",strokeWidth:2})}),Object(l.jsx)("path",{d:"M12 12L12 2A10 10 0 0 1 ".concat(12+c," ").concat(12+o,"z"),fill:u}),Object(l.jsx)("path",{d:"M12 12L12 22A10 10 0 0 1 ".concat(12+i," ").concat(12+s,"z"),fill:u})]})};!function(e){e.UNKNOWN="unknown",e.PAUSE="pause",e.END="end"}(I||(I={}));var H=function(e){var t=e.split(" ")[0].toLowerCase();return t===I.PAUSE?{code:I.PAUSE,color:"#165180"}:t===I.PAUSE?{code:I.END,color:"#165180"}:{code:I.UNKNOWN,color:"none"}},F=function(e){var t=e.tracks,n=e.onDelete,c=Object(r.useCallback)((function(e){return function(){null===n||void 0===n||n(e)}}),[n]),i=Object(r.useMemo)((function(){return t.map((function(e,n){e.ID;var c,r=e.time,o=(e.description,null===(c=t[n+1])||void 0===c?void 0:c.time);return o?function(e,t){var n=Math.floor((+t-+e)/1e3),c=Math.floor(n/60),r=Math.floor(c/60),o=c%60,i=n%60,s=[];return r&&s.push(r+"h"),o&&s.push(o+"m"),i&&s.push(i+"s"),s.join(" ")}(r,o):void 0}))}),[t]),s=Object(r.useMemo)((function(){return t.map((function(e){var t=e.description;return H(t)}))}),[t]),a=Object(r.useMemo)((function(){var e=0,n=t.map((function(n,c){var r,o=n.time,i=null===(r=t[c+1])||void 0===r?void 0:r.time;return s[c].code===I.PAUSE&&i&&(e+=+o-+i),e}));return t.map((function(e,c){var r;e.ID,e.time,e.description;if(s[c].code!==I.PAUSE){var o=t[0].time,i=null===(r=t[c+1])||void 0===r?void 0:r.time;return i?(+i-+o+ +n[c])/288e5:void 0}}))}),[t,s]);return Object(l.jsx)("div",{className:"tracks",children:t.map((function(e,t){var r=e.ID,u=e.time,j=e.description,d=a[t];return Object(l.jsxs)(o.a.Fragment,{children:[Object(l.jsxs)("strong",{className:"track__time",children:[Object(l.jsx)(T,{date:u}),u.toLocaleTimeString()]}),Object(l.jsx)("em",{className:"track__description",style:{backgroundColor:s[t].color},children:j}),Object(l.jsx)("div",{className:"track__rate",children:d&&Object(l.jsx)(_,{rate:d})}),Object(l.jsx)("div",{className:"track__diff",children:i[t]}),Object(l.jsx)("div",{className:"track__actions",children:n&&Object(l.jsx)("button",{onClick:c(r),className:"icon-button",title:"delete",children:Object(l.jsx)(b,{})})})]},r)}))})},B=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(!1),i=Object(a.a)(o,2),s=i[0],u=i[1],j=Object(r.useCallback)((function(){u(!0),R.startFocusListener()}),[]),b=Object(r.useCallback)((function(e){var t=x(),n=new Date,r={ID:t,description:e,time:n};D().create(r).then((function(){c((function(e){return e.concat(r)})),H(e).code===I.END&&(u(!1),R.removeFocusListener())}))}),[]);Object(r.useEffect)((function(){R.onResult(b)}),[b]),Object(r.useEffect)((function(){D().current().then((function(e){c(e),e.length&&j()}))}),[j]);var f=Object(r.useCallback)((function(e){D().remove(e).then((function(){return c((function(t){return t.filter((function(t){return t.ID!==e}))}))}))}),[]);return Object(l.jsxs)("main",{children:[Object(l.jsx)(F,{tracks:n,onDelete:f}),s||Object(l.jsxs)("div",{className:"microphone",children:[Object(l.jsx)("p",{children:"Start a new session by clicking on the Microphone."}),Object(l.jsx)("button",{className:"icon-button",onClick:j,children:Object(l.jsx)(d,{})})]})]})},U=function(e){var t=e.open,n=e.onClose;return Object(l.jsxs)("div",{className:"settings"+(t?" settings--open":""),children:[Object(l.jsx)("h2",{children:"Settings"}),Object(l.jsx)("button",{className:"settings__close icon-button",onClick:n,title:"close settings",children:Object(l.jsx)(h,{})}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Language: "}),R.locale," ",Object(l.jsx)("em",{children:"(configure your Browser language to change this value)"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Storage: "}),"Browser Local Storage ",Object(l.jsx)("em",{children:"(not yet configurable)"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Work per day: "}),"8h ",Object(l.jsx)("em",{children:"(not yet configurable)"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Speech Recognition Trigger: "}),"Tab Focus ",Object(l.jsx)("em",{children:"(not yet configurable)"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"Pause Command: "}),'"Pause" [#165180] ',Object(l.jsx)("em",{children:"(not yet configurable)"})]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("strong",{children:"End Command: "}),'"End" [#165180] ',Object(l.jsx)("em",{children:"(not yet configurable)"})]})]})},V=function(){var e=Object(r.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){D().getLatest().then(c)}),[]),Object(l.jsx)("aside",{children:n.map((function(e,t){return Object(l.jsxs)("details",{children:[Object(l.jsx)("summary",{children:e[0].time.toLocaleDateString()}),Object(l.jsx)(F,{tracks:e})]},t)}))})},W=function(){var e=Object(r.useState)(!1),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useCallback)((function(){return c(!0)}),[]),i=Object(r.useCallback)((function(){return c(!1)}),[]),s=Object(r.useMemo)((function(){return(new Date).toLocaleDateString()}),[]);return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsxs)("header",{children:[Object(l.jsx)("h1",{children:s}),Object(l.jsx)("button",{className:"icon-button",onClick:o,title:"settings",children:Object(l.jsx)(f,{})})]}),Object(l.jsx)(U,{open:n,onClose:i}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsx)(B,{}),Object(l.jsx)(V,{})]})]})};s.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(W,{})}),document.getElementById("root"))},9:function(e){e.exports=JSON.parse('{"DELETE":"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z","MICROPHONE":"M176 352c53.02 0 96-42.98 96-96V96c0-53.02-42.98-96-96-96S80 42.98 80 96v160c0 53.02 42.98 96 96 96zm160-160h-16c-8.84 0-16 7.16-16 16v48c0 74.8-64.49 134.82-140.79 127.38C96.71 376.89 48 317.11 48 250.3V208c0-8.84-7.16-16-16-16H16c-8.84 0-16 7.16-16 16v40.16c0 89.64 63.97 169.55 152 181.69V464H96c-8.84 0-16 7.16-16 16v16c0 8.84 7.16 16 16 16h160c8.84 0 16-7.16 16-16v-16c0-8.84-7.16-16-16-16h-56v-33.77C285.71 418.47 352 344.9 352 256v-48c0-8.84-7.16-16-16-16z","SEARCH":"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z","SETTINGS":"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z","SPINNER":"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z","TIMES":"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"}')}},[[17,1,2]]]);